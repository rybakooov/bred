<template>
  <transition name="fade-now">
    <div :class="[$style.loading, {[$style.anim]: canShow}]" v-if="loading && main">
      <svg width="367" height="27" viewBox="0 0 367 27" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g>
          <path d="M18.0839 2.25581C19.8085 3.37152 21.1092 5.06622 21.6149 7.492H16.4815C15.6724 5.45916 13.5878 4.432 10.98 4.432C9.72193 4.432 8.58993 4.66516 7.75373 5.15251C6.89938 5.65045 6.34 6.42909 6.34 7.452C6.34 9.12582 7.86855 10.1611 9.75858 10.5688L9.75857 10.5688L9.76499 10.5701L13.3275 11.2898C13.3277 11.2898 13.328 11.2899 13.3282 11.2899C15.4433 11.7238 17.7455 12.251 19.5201 13.3167C21.2578 14.3601 22.468 15.9037 22.468 18.432C22.468 20.9777 21.1944 22.9783 19.2453 24.3601C17.286 25.7492 14.6551 26.5 12.024 26.5C8.73792 26.5 6.08844 25.692 4.15228 24.2377C2.36278 22.8936 1.14733 20.9715 0.607623 18.536H5.74106C6.14388 19.8281 6.88574 20.8128 7.92937 21.4811C9.06113 22.2058 10.5057 22.532 12.168 22.532C13.2703 22.532 14.4765 22.3565 15.4267 21.8639C16.4028 21.3577 17.132 20.496 17.132 19.188C17.132 18.0973 16.4743 17.3296 15.5325 16.7843C14.6051 16.2474 13.3243 15.8747 11.8759 15.5669L11.8722 15.5661L8.7042 14.9181L8.70365 14.918C6.61609 14.4934 4.68019 13.7862 3.27506 12.6519C1.8907 11.5344 1.004 9.99094 1.004 7.812C1.004 5.35948 2.30961 3.55085 4.269 2.33262C6.24226 1.10577 8.8543 0.5 11.34 0.5C13.8119 0.5 16.2114 1.04445 18.0839 2.25581Z" fill="currentColor" stroke="white"/>
          <path d="M37.2029 5.33201H36.7029V5.83201V26.032H31.5109V5.83201V5.33201H31.0109H23.1589V0.932007H45.0909V5.33201H37.2029Z" fill="currentColor" stroke="white"/>
          <path d="M50.6404 21.388H50.28L50.1661 21.7299L48.732 26.032H43.263L52.7144 0.932007H58.7909L68.2769 26.032H62.6621L61.1936 21.7266L61.0781 21.388H60.7204H50.6404ZM56.1902 6.78835L55.7189 5.38968L55.2431 6.78681L51.8591 16.7228L51.6339 17.384H52.3324H59.0644H59.7605L59.5382 16.7243L56.1902 6.78835Z" fill="currentColor" stroke="white"/>
          <path d="M76.4783 16.704V26.032H71.3223V0.932007H80.8663C84.2323 0.932007 87.0822 1.32994 89.0787 2.46835C90.0664 3.03155 90.8414 3.77395 91.3731 4.74282C91.9062 5.7141 92.2103 6.9415 92.2103 8.49601C92.2103 10.3242 91.7085 11.7259 90.8787 12.8034C90.0445 13.8866 88.852 14.6768 87.4185 15.2295L86.8659 15.4425L87.1686 15.9516L93.1633 26.032H87.0956L81.5878 16.4547L81.4436 16.204H81.1543H76.9783H76.4783V16.704ZM76.4783 11.52V12.02H76.9783H81.0463C82.5085 12.02 83.8935 11.9067 84.9241 11.4292C85.451 11.185 85.9028 10.8379 86.2196 10.3491C86.5367 9.85981 86.6943 9.26573 86.6943 8.56801C86.6943 7.88535 86.5353 7.30028 86.2185 6.81562C85.9026 6.33234 85.4528 5.98401 84.9277 5.73555C83.898 5.24834 82.5146 5.11601 81.0463 5.11601H76.9783H76.4783V5.61601V11.52Z" fill="currentColor" stroke="white"/>
          <path d="M108.334 5.33201H107.834V5.83201V26.032H102.642V5.83201V5.33201H102.142H94.2897V0.932007H116.222V5.33201H108.334Z" fill="currentColor" stroke="white"/>
        </g>
        <g>
          <path d="M138.657 5.33201H138.157V5.83201V26.032H132.965V5.83201V5.33201H132.465H124.613V0.932007H146.545V5.33201H138.657Z" fill="currentColor" stroke="#6D6D6D"/>
          <path d="M166.141 10.904H166.641V10.404V0.932007H171.797V26.032H166.641V15.84V15.34H166.141H155.413H154.913V15.84V26.032H149.757V0.932007H154.913V10.404V10.904H155.413H166.141Z" fill="currentColor" stroke="#6D6D6D"/>
          <path d="M182.362 21.096V21.596H182.862H196.222V26.032H177.206V0.932007H196.222V5.33201H182.862H182.362V5.83201V10.404V10.904H182.862H195.466V15.34H182.862H182.362V15.84V21.096Z" fill="currentColor" stroke="#6D6D6D"/>
        </g>
        <g>
          <path d="M224.475 10.904H224.975V10.404V0.932007H230.131V26.032H224.975V15.84V15.34H224.475H213.747H213.247V15.84V26.032H208.091V0.932007H213.247V10.404V10.904H213.747H224.475Z" fill="currentColor" stroke="white"/>
          <path d="M235.54 26.032V0.932007H240.696V26.032H235.54Z" fill="currentColor" stroke="white"/>
          <path d="M261.791 2.25581C263.516 3.37152 264.816 5.06622 265.322 7.492H260.189C259.38 5.45916 257.295 4.432 254.687 4.432C253.429 4.432 252.297 4.66516 251.461 5.15251C250.607 5.65045 250.047 6.42909 250.047 7.452C250.047 9.12582 251.576 10.1611 253.466 10.5688L253.466 10.5688L253.472 10.5701L257.035 11.2898C257.035 11.2899 257.035 11.2899 257.035 11.2899C259.151 11.7238 261.453 12.2511 263.227 13.3167C264.965 14.3601 266.175 15.9037 266.175 18.432C266.175 20.9777 264.902 22.9783 262.953 24.3601C260.993 25.7492 258.362 26.5 255.731 26.5C252.445 26.5 249.796 25.692 247.86 24.2377C246.07 22.8936 244.855 20.9715 244.315 18.536H249.448C249.851 19.8281 250.593 20.8128 251.637 21.4811C252.768 22.2058 254.213 22.532 255.875 22.532C256.978 22.532 258.184 22.3565 259.134 21.8639C260.11 21.3577 260.839 20.496 260.839 19.188C260.839 18.0973 260.182 17.3296 259.24 16.7843C258.312 16.2474 257.032 15.8747 255.583 15.5669L255.579 15.5661L252.411 14.9181L252.411 14.918C250.323 14.4934 248.387 13.7862 246.982 12.6519C245.598 11.5344 244.711 9.99094 244.711 7.812C244.711 5.35948 246.017 3.55085 247.976 2.33262C249.95 1.10577 252.562 0.5 255.047 0.5C257.519 0.5 259.919 1.04445 261.791 2.25581Z" fill="currentColor" stroke="white"/>
          <path d="M280.91 5.33201H280.41V5.83201V26.032H275.218V5.83201V5.33201H274.718H266.866V0.932007H288.798V5.33201H280.91Z" fill="currentColor" stroke="white"/>
          <path d="M302.584 4.576C300.529 4.576 298.634 5.34724 297.258 6.87426C295.884 8.39862 295.064 10.6334 295.064 13.5C295.064 16.3666 295.884 18.6014 297.258 20.1257C298.634 21.6528 300.529 22.424 302.584 22.424C304.639 22.424 306.533 21.6528 307.91 20.1257C309.284 18.6014 310.104 16.3666 310.104 13.5C310.104 10.6334 309.284 8.39862 307.91 6.87426C306.533 5.34724 304.639 4.576 302.584 4.576ZM302.584 0.5C306.466 0.5 309.718 1.80082 311.997 4.05456C314.276 6.30752 315.62 9.54892 315.62 13.5C315.62 17.4511 314.276 20.6925 311.997 22.9454C309.718 25.1992 306.466 26.5 302.584 26.5C298.683 26.5 295.432 25.1989 293.157 22.9458C290.883 20.6933 289.548 17.452 289.548 13.5C289.548 9.54799 290.883 6.30672 293.157 4.05423C295.432 1.8011 298.683 0.5 302.584 0.5Z" fill="currentColor" stroke="white"/>
          <path d="M324.58 16.704V26.032H319.424V0.932007H328.968C332.334 0.932007 335.184 1.32994 337.181 2.46835C338.168 3.03155 338.943 3.77395 339.475 4.74282C340.008 5.7141 340.312 6.9415 340.312 8.49601C340.312 10.3242 339.81 11.7259 338.981 12.8034C338.146 13.8866 336.954 14.6768 335.52 15.2295L334.968 15.4425L335.27 15.9516L341.265 26.032H335.197L329.69 16.4547L329.545 16.204H329.256H325.08H324.58V16.704ZM324.58 11.52V12.02H325.08H329.148C330.61 12.02 331.995 11.9067 333.026 11.4292C333.553 11.185 334.005 10.8379 334.321 10.3491C334.639 9.85981 334.796 9.26573 334.796 8.56801C334.796 7.88535 334.637 7.30028 334.32 6.81562C334.004 6.33234 333.555 5.98401 333.03 5.73555C332 5.24834 330.616 5.11601 329.148 5.11601H325.08H324.58V5.61601V11.52Z" fill="currentColor" stroke="white"/>
          <path d="M365.626 0.932007L356.028 16.1857L355.952 16.3078V16.452V26.032H350.796V16.38V16.2383L350.721 16.1177L341.363 0.932007H347.38L353.068 10.6917L353.497 11.4285L353.93 10.6941L359.689 0.932007H365.626Z" fill="currentColor" stroke="white"/>
        </g>
      </svg>
    </div>
  </transition>
</template>

<script>
  export default {
    data() {
      return {
        loading: false,
        canShow: false
      }
    },
    computed: {
      main() {
        return this.$route.fullPath === '/'
      }
    },
    methods: {
      start() {
        this.loading = true
        setTimeout(() => { this.canShow = true }, 0)
        setTimeout(() => {
          if (this.main) {
            this.$scroll.scrollTo({ y: 0 })
          }
          this.loading = false
          this.canShow = false
        }, 6000)
      },
      finish() {
        this.loading = false
      }
    }
  }
</script>

<style module lang="scss">
  .loading {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: #191919;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 20;
    svg {
      display: block;
      height: auto;
      max-width: calc(100% - var(--root-layout-offset) * 2);
      g:nth-child(1) {
        transition: color .5s 3s;
        color: transparent;
      }
      g:nth-child(2) {
        transition: color .5s 3.4s;
        color: transparent;
      }
      g:nth-child(3) {
        transition: color .5s 3.8s;
        color: transparent;
      }
    }
  }
  .anim {
    svg {
      path {
        stroke-dasharray: 200;
        stroke-dashoffset: 200;
        animation: dash 3s linear forwards;
      }
      g:nth-child(1) {
        color: white;
      }
      g:nth-child(2) {
        color: gray;
      }
      g:nth-child(3) {
        color: white;
      }
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
</style>
